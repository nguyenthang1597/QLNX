{"version":3,"sources":["API/Customer.js","API/Bill.js","components/BanLe/PopupNewProduct.js","components/BanLe/index.js"],"names":["__webpack_require__","d","__webpack_exports__","GetlistCustomer","AddCustomer","DeleteCustomer","_Config__WEBPACK_IMPORTED_MODULE_0__","axios__WEBPACK_IMPORTED_MODULE_1__","axios__WEBPACK_IMPORTED_MODULE_1___default","n","token","url","concat","HOST","headers","Authorization","axios","get","data","post","id","delete","SaveBill","SaveBillBanLe","GetBillSuaChuaByMaHoaDon","GetBillBanLeByMaHoaDon","ThanhToan","mahoadon","put","connect","state","Authenticate","listProduct","Product","dispatch","getAllProduct","props","mTenCongViec","lib","handleInput","_useState","useState","_useState2","Object","slicedToArray","mMaPhuTung","setMaPhuTung","mDonGia","mSoLuong","mTonKho","mTienCong","_useState3","_useState4","useEffect","isShowing","setValue","react_default","a","createElement","styles","className","style","textAlign","flex","assign","readOnly","marginLeft","list","name","value","onChange","e","values","product","find","item","maphutung","undefined","tentiengviet","giaban_le","soluongtonkho","searchMaPhuTung","target","map","index","disabled","key","type","max","min","marginTop","fontSize","justifyContent","fontWeight","parseInt","onClick","alert","newData","tencongviec","dongia","soluong","tongtien","addItemToProduct","onCloseClick","info","mCustomerName","makhachhang","setMaKhachHang","mProducts","setProducts","_useState5","_useState6","isShowNewProduct","setNewProduct","_useState7","_useState8","mTongTien","setTongTien","_useState9","_useState10","listCustomer","setListCustomer","clearAll","then","res","catch","err","autocomplete","kq","ma","ten","handleChangeKH","marginBottom","alignItems","filter","chitiet","manv","tenkh","makh","handleSaveBill","BanLe_PopupNewProduct","toConsumableArray"],"mappings":"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","file":"static/js/9.08fffadb.chunk.js","sourcesContent":["import {HOST} from '../Config'\nimport axios from 'axios'\n\nexport const GetlistCustomer = (token) => {\n    let url = `${HOST}/customer`\n    let headers = {\n        'Authorization': 'Bearer ' + token\n    }\n    return axios.get(url,{headers})\n}\nexport const AddCustomer = (token,data) => {\n    let url = `${HOST}/customer`\n    let headers = {\n        'Authorization': 'Bearer ' + token\n    }\n    return axios.post(url,data,{headers})\n}\nexport const DeleteCustomer  = (token,id) => {\n    let url = `${HOST}/customer/ma/`+id;\n    let headers = {\n        'Authorization': 'Bearer ' + token\n    }\n    return axios.delete(url,{headers})\n}\n","import {HOST} from '../Config'\nimport axios from 'axios'\n\nexport const SaveBill = (token,data) => {\n    let url = `${HOST}/billsuachua`;\n    let headers = {\n        'Authorization': 'Bearer ' + token\n    }\n    return axios.post(url,data,{headers})\n}\n\nexport const SaveBillBanLe = (token, data) => {\n    let url = `${HOST}/billle`;\n    let headers = {\n        'Authorization': 'Bearer ' + token\n    }\n    return axios.post(url,data,{headers})\n}\n\nexport const GetBillSuaChuaByMaHoaDon = (token, mahoadon) => {\n    let url = `${HOST}/billsuachua/mahoadon/${mahoadon}/chitiet`;\n    let headers = {\n        'Authorization': 'Bearer ' + token\n    }\n    return axios.get(url,{headers})\n}\n\nexport const GetBillBanLeByMaHoaDon = (token, mahoadon) => {\n    let url = `${HOST}/billle/mahoadon/${mahoadon}/chitiet`;\n    let headers = {\n        'Authorization': 'Bearer ' + token\n    }\n    return axios.get(url,{headers})\n}\n\n\nexport const ThanhToan = (token, mahoadon) => {\n    let url = `${HOST}/bill/mahoadon/${mahoadon}/thanhtoan`;\n    let headers = {\n        'Authorization': 'Bearer ' + token\n    }\n    return axios.put(url,{headers})\n}\n\nexport const HuyThanhToan = (token, mahoadon) => {\n    let url = `${HOST}/bill/mahoadon/${mahoadon}/huy`;\n    let headers = {\n        'Authorization': 'Bearer ' + token\n    }\n    return axios.delete(url,{headers})\n}","import React, {useState, useEffect} from 'react'\nimport {Modal, ModalContent, DivFlexColumn, Input, DivFlexRow, Button, DelButton} from '../../styles'\nimport lib from '../../lib'\nimport {connect} from 'react-redux'\nimport {getAllProduct} from '../../actions/Product';\n\nconst PopupNewProduct = (props) => {\n\n    let mTenCongViec = lib.handleInput(\"\");\n    let [mMaPhuTung, setMaPhuTung] = useState(\"\");\n    let mDonGia = lib.handleInput(0);\n    let mSoLuong = lib.handleInput(1);\n    let mTonKho = lib.handleInput(1);\n    let mTienCong = lib.handleInput(0);\n    let [mDataList, setDataList] = useState([]);\n\n    const searchMaPhuTung = (values) => {\n        setMaPhuTung(values);\n        let product = props.listProduct.find(function (item) {\n            return item.maphutung === values;\n        });\n        if (product !== undefined) {\n            mTenCongViec.setValue(product.tentiengviet);\n            mDonGia.setValue(product.giaban_le);\n            mTonKho.setValue(product.soluongtonkho);\n        }\n    };\n\n    const handleAdd = () => {\n        if (mTenCongViec.value === \"\" || mMaPhuTung.value === \"\" || mDonGia.value === 0 || mSoLuong.value === 0) {\n            alert(\"Chưa nhập dữ liệu đầy đủ.\");\n        } else {\n            let newData = {\n                tencongviec: mTenCongViec.value,\n                maphutung: mMaPhuTung,\n                dongia: mDonGia.value,\n                soluong: mSoLuong.value,\n                tongtien: mDonGia.value * mSoLuong.value,\n            };\n            props.addItemToProduct(newData);\n            props.onCloseClick();\n        }\n    };\n\n    useEffect(() => {\n        if (props.isShowing) {\n            props.getAllProduct(props.token);\n            setMaPhuTung(\"\");\n            mTenCongViec.setValue(\"\");\n            mDonGia.setValue(0);\n            mSoLuong.setValue(1);\n        }\n    }, [props.isShowing]);\n\n    //\n    // useEffect(() => {\n    //     if(props.isShowing && props.listProduct) {\n    //         SliceTop20(props.listProduct);\n    //     }\n    // },[props.isShowing, props.listProduct]);\n    //\n    // const SliceTop20 = (list) => {\n    //     setDataList(list.slice(0,20));\n    // };\n\n    return (\n        <Modal className={props.isShowing ? \"active\" : \"\"}>\n            <ModalContent>\n                <h2 style={{textAlign: 'center'}}></h2>\n                <DivFlexRow>\n                    <DivFlexColumn style={{flex: 1}}>\n                        <label>Tên phụ tùng </label>\n                        <Input readOnly {...mTenCongViec} />\n                    </DivFlexColumn>\n                    <DivFlexColumn style={{flex: 1, marginLeft: 15}}>\n                        <label>Mã phụ tùng: </label>\n                        <Input list=\"browsers\" name=\"browser\" value={mMaPhuTung} onChange={(e) => {\n                            mDonGia.setValue(\"\");\n                            mTenCongViec.setValue(\"\");\n                            mTonKho.setValue(1);\n                            mSoLuong.setValue(1);\n                            searchMaPhuTung(e.target.value);\n                        }}/>\n                        <datalist id=\"browsers\">\n                            {props.listProduct && props.listProduct.map((item, index) => (\n                                     <option disabled={item.soluongtonkho === 0} key={index}\n                                                   value={item.maphutung}>{item.tentiengviet} ({item.soluongtonkho})</option>\n                            ))}\n                        </datalist>\n\n                    </DivFlexColumn>\n                </DivFlexRow>\n\n                <DivFlexRow>\n                    <DivFlexColumn style={{flex: 1}}>\n                        <label>Đơn giá: </label>\n                        <Input readOnly {...mDonGia} />\n                    </DivFlexColumn>\n                    <DivFlexColumn style={{flex: 1, marginLeft: 15}}>\n                        <label>Số lượng: </label>\n                        <Input type=\"Number\" max={mTonKho.value} min={1} {...mSoLuong} />\n                    </DivFlexColumn>\n                </DivFlexRow>\n\n                <DivFlexRow style={{marginTop: 10, fontSize: 20, justifyContent: 'flex-end'}}>\n                    <label>Tổng tiền: <span\n                        style={{fontWeight: 'bold'}}>{(parseInt(mDonGia.value) || 0) * (parseInt(mSoLuong.value) || 0) + (parseInt(mTienCong.value) || 0)} VND</span></label>\n                </DivFlexRow>\n\n                <DivFlexRow style={{marginTop: 10, fontSize: 20, justifyContent: 'flex-end'}}>\n                    <Button onClick={handleAdd}>Thêm</Button>\n                    <DelButton style={{marginLeft: 10}} onClick={() => props.onCloseClick()}>Hủy</DelButton>\n                </DivFlexRow>\n\n            </ModalContent>\n        </Modal>\n    )\n};\n\nconst mapState = (state) => ({\n    token: state.Authenticate.token,\n    listProduct: state.Product.listProduct,\n});\n\nconst mapDispatch = (dispatch) => ({\n    getAllProduct: (token) => {\n        dispatch(getAllProduct(token))\n    },\n});\n\nexport default connect(mapState, mapDispatch)(PopupNewProduct);","import React, {useState, useEffect } from 'react';\nimport lib from '../../lib'\nimport { DivFlexRow, DivFlexColumn, Button, Input, Table, DelButton } from '../../styles'\nimport PopupNewProduct from './PopupNewProduct'\nimport {SaveBillBanLe} from '../../API/Bill'\nimport {GetlistCustomer} from '../../API/Customer'\nimport {connect} from 'react-redux'\n\nconst BanLe = (props) => {\n\n    let mCustomerName = lib.handleInput(\"\");\n    let [makhachhang,setMaKhachHang] = useState(\"\");\n    let [mProducts,setProducts] = useState([]);\n    let [isShowNewProduct, setNewProduct] = useState(false);\n    let [mTongTien,setTongTien] = useState(0);\n    let [listCustomer, setListCustomer] = useState([]);\n\n    useEffect(() => {\n        clearAll();\n        GetlistCustomer(props.token).then(res => {\n            setListCustomer(res.data);\n        })\n        .catch(err => {\n            alert(\"Không thể lấy danh sách khách hàng\")\n        })\n    }, [])\n\n    const clearAll = () => {\n        setTongTien(0);\n        setProducts([]);\n        setNewProduct(false);\n        mCustomerName.setValue(\"\");\n        setMaKhachHang(\"\");\n    }\n\n   \n    const handleSaveBill=()=>{\n        \n        if(mTongTien === 0) {\n            alert(\"Chưa có sản phẩm nào.\")\n            return;\n        }\n\n        let chitiet = mProducts.map(function(item) {\n            return {\n                maphutung: item.maphutung,\n                soluong: item.soluong,\n            }\n        })\n\n        let data = {\n            manv: props.info.ma,\n            tenkh: mCustomerName.value,\n            makh: makhachhang,\n            tongtien: mTongTien,\n            chitiet: chitiet,\n        }\n\n        SaveBillBanLe(props.token,data).then(res => {\n           clearAll();\n            alert('Thành công. ' + res.data.mahoadon);\n        })\n        .catch(err => {\n            alert(\"Không xuất được hóa đơn.\");\n        })\n    }\n\n    const deleteProduct = (maphutung) => {\n        setProducts(mProducts.filter(function(item) {\n            return item.maphutung !== maphutung;\n        }))\n    }\n\n    const addItemToProduct = (item) => {\n        setTongTien(mTongTien + item.tongtien);\n        setProducts([...mProducts,item]);\n    }\n\n    const handleChangeKH = (e) => {\n        setMaKhachHang(e.target.value);\n        let kq = null;\n        kq = listCustomer.find(function(item) {\n            return item.ma === parseInt(e.target.value)\n        })\n        if(kq) {\n            mCustomerName.setValue(kq.ten);\n        }\n    }\n\n    return (\n        <div>\n            <h1 style={{ textAlign: \"center\" }}>Hóa đơn bán lẻ</h1>\n            <DivFlexRow>\n                <DivFlexColumn>\n                    <label>Tên khách hàng: </label>\n                    <Input autocomplete=\"off\" {...mCustomerName} />\n                </DivFlexColumn>\n                <DivFlexColumn style={{ marginLeft: 20 }}>\n                    <label>Mã khách hàng: </label>\n                    <Input list=\"customer\" name=\"customer\" autocomplete=\"off\" value={makhachhang} onChange={(e) => handleChangeKH(e)}/>\n                    <datalist id=\"customer\">\n                        {listCustomer.map((item, index) => (\n                            <option key={index} value={item.ma} >{item.ten}</option>\n                        ))}\n                    </datalist>\n                </DivFlexColumn>\n            </DivFlexRow>\n            <DivFlexRow style={{ marginTop: 5, marginBottom: 5, justifyContent: 'space-between', alignItems: 'center' }}>\n                <label>Bảng giá phụ tùng: </label>\n                <Button onClick={() => setNewProduct(true)}>\n                    Thêm mới\n                </Button>\n            </DivFlexRow>\n            <Table>\n                <tbody>\n                    <tr>\n                        <th>STT</th>\n                        <th>Tên phụ tùng</th>\n                        <th>Mã phụ tùng</th>\n                        <th>Đơn giá</th>\n                        <th>SL</th>\n                        <th>Tổng tiền</th>\n                        <th><i className=\"far fa-trash-alt\"></i></th>\n                    </tr>\n\n                    {mProducts.map((item, index) => (\n                        <tr key={index}>\n                            <td>{index + 1}</td>\n                            <td>{item.tencongviec}</td>\n                            <td>{item.maphutung}</td>\n                            <td>{item.dongia}</td>\n                            <td>{item.soluong}</td>\n                            <td>{item.tongtien}</td>\n                            <td>\n                                <DelButton onClick={()=>{\n                                    deleteProduct(item.maphutung);\n                                }}>\n                                    <i className=\"far fa-trash-alt\"></i>\n                                </DelButton>\n                            </td>\n                        </tr>\n\n                    ))}\n\n                </tbody>\n            </Table>\n            <DivFlexRow style={{justifyContent: 'flex-end'}}>\n                <h3>Tổng tiền: {mTongTien} VND</h3>\n            </DivFlexRow>\n            <DivFlexRow style={{ marginTop: 25, marginBottom: 5, justifyContent: 'space-between' }}>\n                <label></label>\n                <Button onClick={() => {\n                    handleSaveBill();\n                    \n                    }}>\n                    Lưu\n                </Button>\n            </DivFlexRow>\n            <PopupNewProduct \n                isShowing={isShowNewProduct}\n                onCloseClick={() => setNewProduct(false)}\n                addItemToProduct={(item) => addItemToProduct(item)}\n            />\n        </div>\n    );\n}\n\nconst mapState = (state) => ({\n    token: state.Authenticate.token,\n    info: state.Authenticate.info,\n})\n\nexport default connect(mapState)(BanLe);"],"sourceRoot":""}