{"version":3,"sources":["icon/repair.svg","components/Services/Services.js"],"names":["module","exports","__webpack_require__","p","RepairWraper","styled","div","_templateObject","RepairItem","_templateObject2","ARR","CRepairItem","props","mIsWorking","working","react__WEBPACK_IMPORTED_MODULE_4___default","a","createElement","className","STT","alt","src","ImgRepair","concat","item","mahoadon","_styles__WEBPACK_IMPORTED_MODULE_7__","style","marginTop","color","onClick","history","push","window","confirm","socket","emit","maban","select","location","pathname","withRouter","_useState","useState","_useState2","Object","_home_nguyenthang_Documents_MuoiCu_app2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","liftTable","setLiftTable","subscribe","on","data","_ref","_home_nguyenthang_Documents_MuoiCu_app2_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_home_nguyenthang_Documents_MuoiCu_app2_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","mark","_callee","wrap","_context","prev","next","console","log","stop","_x","apply","this","arguments","stt","cb","_ref2","_callee2","_context2","_x2","release","useEffect","map","index","key","trangthai"],"mappings":"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","file":"static/js/12.70cf82c7.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/repair.14f250f3.svg\";","import React, { useState, useEffect } from 'react'\nimport styled from 'styled-components'\nimport { withRouter } from 'react-router-dom'\nimport { Button, DivFlexRow } from '../../styles'\nimport ImgRepair from '../../icon/repair.svg'\n\nconst RepairWraper = styled.div`\n    width: 100%;\n    height: auto;\n    display: flex;\n    justify-content: space-around;\n    margin: 15px 0px;\n`\n\nconst RepairItem = styled.div`\n    width: 250px;\n    height: 180px;\n    background-color: #e6e6e6;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    padding: 10px;\n    border-radius: 10px;\n    position: relative;\n\n    img {\n        width: 100px;\n        height: 100px;\n    }\n\n    span {\n        margin-top: 10px;\n        font-size: 16px;\n        color: black;\n        font-weight: bold;\n    }\n\n    .STT {\n        position: absolute;\n        top: 0;\n        left: 0;\n        font-weight: bold;\n        font-size: 45px;\n        padding: 5px;\n    }\n\n    &.working {\n        background-color: #ff6666;\n    }\n\n    &.dangnhap {\n        background-color: #ff0066;\n    }\n`\nconst ARR = [1, 2, 3, 4];\n\nconst CRepairItem = (props) => {\n    let mIsWorking = props.working || 0;\n    const handleBtnUseClick = () => {\n        props.select(props.STT, null, () => {\n            if (props.history.location.pathname !== '/services/repairedbill')\n                props.history.push(`/services/repairedbill/${props.STT}`)\n        });\n    }\n\n    const handleXemThongTin = () => {\n        props.history.push(`/services/repairedbill/${props.STT}`)\n    }\n\n    const handleThuHoi = () => {\n        if(window.confirm(\"Bạn có chắc muốn thu hồi\")) {\n            props.socket.emit('release', {\n                maban: props.STT - 1,\n                mahoadon: \"\"\n            })\n        }\n    }\n\n    return (\n        <RepairItem className={mIsWorking === 0 ? \"\" : mIsWorking === 1 ? \"dangnhap\" : \"working\"}>\n            <div className=\"STT\">{props.STT}</div>\n            <img alt=\"img repair\" src={ImgRepair} />\n            <span>{mIsWorking === 2 ? `Sửa chữa ${props.item && props.item.mahoadon}` : mIsWorking === 1 ? \"Đang nhập thông tin\" : \"Trống\"}</span>\n            <DivFlexRow>\n                {mIsWorking === 2 ? <Button style={{ marginTop: 10, color: \"black\" }} onClick={handleXemThongTin}>\n                    Thông tin\n                </Button> : mIsWorking === 1 ?\n                        <Button style={{ marginTop: 10, color: \"black\" }} onClick={handleThuHoi}>\n                            Thu hồi\n                        </Button>\n                        :\n                        <Button style={{ marginTop: 10, color: \"black\" }} onClick={handleBtnUseClick}>\n                            Sử dụng\n                </Button>\n                }\n            </DivFlexRow>\n\n        </RepairItem>\n    )\n}\n\nconst Services = (props) => {\n\n    let [liftTable, setLiftTable] = useState([]);\n    const subscribe = () => {\n        props.socket.emit('connected', () => {\n            //setLiftTable(data);\n        })\n    }\n\n    props.socket.on('connected', (data) => {\n        setLiftTable(data);\n    })\n    props.socket.on('lifttableFull', async data => {\n        await setLiftTable(data);\n        console.log(data);\n    })\n    const select = (stt, mahoadon, cb) => {\n        props.socket.emit('select', {\n            maban: stt - 1,\n            mahoadon: \"\"\n        })\n        props.socket.on('lifttable', async data => {\n            await setLiftTable(data);\n            cb();\n        })\n    };\n    const release = (stt) => {\n        props.socket.emit('release', {\n            maban: stt - 1,\n            mahoadon: \"\"\n        })\n    };\n    useEffect(() => {\n        subscribe();\n        return () => subscribe();\n    }, [])\n    return (\n        <div>\n            <h3>Khu vực sửa chữa</h3>\n            <RepairWraper>\n                {ARR.map(index => (\n                    <CRepairItem socket={props.socket} key={index} STT={index} history={props.history} select={select} release={release} item={liftTable[index - 1]} working={liftTable[index - 1] && liftTable[index - 1].trangthai} />\n                ))}\n            </RepairWraper>\n            <RepairWraper>\n                {ARR.map(index => (\n                    <CRepairItem socket={props.socket} key={index + 4} STT={index + 4} history={props.history} working={liftTable[index + 3] && liftTable[index + 3].trangthai} release={release} select={select} />\n                ))}\n            </RepairWraper>\n        </div>\n    )\n}\n\nexport default withRouter(Services);"],"sourceRoot":""}